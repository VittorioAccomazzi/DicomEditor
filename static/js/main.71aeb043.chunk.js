(this["webpackJsonpdise-react"]=this["webpackJsonpdise-react"]||[]).push([[0],{134:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a.n(n),i=a(30),s=a(0),c=a.n(s),o=a(10),u=a.n(o),l=a(91),m=a.n(l),d=a(41),g=a(13),h=a(97),f=a(168),p=a(90),b=a.n(p),j=a(89),x=a.n(j),v=a(136),O=a(24),y=a(17),I=a(18),D=r.a.mark(N);function N(e){var t,a,n,i,s,c,o,u,l,m,d,g,h,f,p,b;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=Object(O.a)(e),r.prev=1,t.s();case 3:if((a=t.n()).done){r.next=58;break}n=a.value,i=e.indexOf(n),s=Object(O.a)(n.studies),r.prev=7,s.s();case 9:if((c=s.n()).done){r.next=48;break}o=c.value,u=n.studies.indexOf(o),l=Object(O.a)(o.series),r.prev=13,l.s();case 15:if((m=l.n()).done){r.next=38;break}d=m.value,g=o.series.indexOf(d),h=Object(O.a)(d.images),r.prev=19,h.s();case 21:if((f=h.n()).done){r.next=28;break}return p=f.value,b=d.images.indexOf(p),r.next=26,{patient:n,study:o,series:d,image:p,patIndex:i,stuIndex:u,serindex:g,imgIndex:b};case 26:r.next=21;break;case 28:r.next=33;break;case 30:r.prev=30,r.t0=r.catch(19),h.e(r.t0);case 33:return r.prev=33,h.f(),r.finish(33);case 36:r.next=15;break;case 38:r.next=43;break;case 40:r.prev=40,r.t1=r.catch(13),l.e(r.t1);case 43:return r.prev=43,l.f(),r.finish(43);case 46:r.next=9;break;case 48:r.next=53;break;case 50:r.prev=50,r.t2=r.catch(7),s.e(r.t2);case 53:return r.prev=53,s.f(),r.finish(53);case 56:r.next=3;break;case 58:r.next=63;break;case 60:r.prev=60,r.t3=r.catch(1),t.e(r.t3);case 63:return r.prev=63,t.f(),r.finish(63);case 66:case"end":return r.stop()}}),D,null,[[1,60,63,66],[7,50,53,56],[13,40,43,46],[19,30,33,36]])}function P(e){var t,a=0,n=Object(O.a)(N(e));try{for(n.s();!(t=n.n()).done;){a+=t.value.image.files.length}}catch(r){n.e(r)}finally{n.f()}return a}function k(e,t){var a=Math.round(e).toString(),n=t>a.length?t-a.length:0;return"0".repeat(n)+a}var S=a(98),w=[{vr:"AE",len:16,isNumeric:!1},{vr:"AS",len:4,isNumeric:!1},{vr:"AT",len:4,isNumeric:!1},{vr:"CS",len:16,isNumeric:!1},{vr:"DA",len:8,isNumeric:!1},{vr:"DS",len:16,isNumeric:!0},{vr:"DT",len:26,isNumeric:!0},{vr:"IS",len:12,isNumeric:!0},{vr:"LO",len:64,isNumeric:!1},{vr:"LT",len:10240,isNumeric:!1},{vr:"OB",len:100,isNumeric:!1},{vr:"OD",len:100,isNumeric:!1},{vr:"OF",len:100,isNumeric:!1},{vr:"SH",len:16,isNumeric:!1},{vr:"ST",len:1024,isNumeric:!1},{vr:"TM",len:14,isNumeric:!0},{vr:"UI",len:64,isNumeric:!0}],C=function(){function e(t,a,n){Object(y.a)(this,e),this.tag=void 0,this.val=void 0,this.vr=void 0,this.org=void 0,this.other=void 0,this.tag=t,this.val=n,this.org=n,this.vr=a,this.other=[]}return Object(I.a)(e,[{key:"name",get:function(){return this.tag.name}},{key:"value",get:function(){return this.val}},{key:"isModified",get:function(){return this.org!==this.val}},{key:"isHidden",get:function(){return this.tag.hide||!1}},{key:"isCompare",get:function(){return this.tag.compare||!1}},{key:"dcmTag",get:function(){return this.tag.tag}},{key:"otherValues",get:function(){return this.other}},{key:"isSame",value:function(e){return this.tag===e.tag&&this.val===e.val}},{key:"setValue",value:function(e){var t=this,a=!0,n=w.find((function(e){return t.vr===e.vr}));n&&((a=e.length<=n.len)&&n.isNumeric&&(a=Object(S.a)(e).map((function(e){return"0123456789.+-Ee,".includes(e)})).reduce((function(e,t){return e&&t}),!0)));if(a&&this.tag.enumeratedValues&&(a=void 0!==this.tag.enumeratedValues.find((function(t){return t===e}))),a&&"DA"===this.vr){var r=0,i=0;8===e.length&&(r=parseInt(e.substr(4,2)),i=parseInt(e.substr(6,2))),a=r>0&&r<13&&i>0&&i<32}return a&&(this.val=e),a}},{key:"addOtherValue",value:function(e){this.other.includes(e)||this.other.push(e)}}]),e}(),T=function(){function e(t,a){var n=this;Object(y.a)(this,e),this.list=void 0,this.list=[],a.forEach((function(e){var a=t.get(e.tag);a&&a.Value&&a.Value.length>0&&n.list.push(new C(e,a.vr,a.Value[0].toString()))}))}return Object(I.a)(e,[{key:"valueList",get:function(){return this.list}},{key:"isEqual",value:function(e){var t=this.list.filter((function(e){return e.isCompare})),a=e.list.filter((function(e){return e.isCompare})),n=a.length===t.length;n&&(n=!t.map((function(e){return a.find((function(t){return t.isSame(e)}))})).some((function(e){return!e})));return n}},{key:"Modify",value:function(e){var t,a=Object(O.a)(this.valueList);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.isModified&&e.has(n.dcmTag)&&e.set(n.dcmTag,n.value)}}catch(r){a.e(r)}finally{a.f()}}},{key:"Merge",value:function(e){var t=this;e.list.forEach((function(e){var a=t.list.find((function(t){return t.dcmTag===e.dcmTag}));a?a.value!==e.value&&a.addOtherValue(e.value):t.list.push(e)}))}}]),e}(),U=[{name:"Patient Name",tag:"00100010",compare:!0},{name:"Patient ID",tag:"00100020",compare:!0},{name:"Other Patient IDs",tag:"00101000"},{name:"Type of Patient ID",tag:"00100022"},{name:"Other Patient Names",tag:"00101001"},{name:"Patient's Birth Name",tag:"00101005"},{name:"Patient Mother's Birth Name",tag:"00101060"},{name:"Patient Age",tag:"00101010"},{name:"Patient's Occupation",tag:"00102180"},{name:"Confidentiality Constraint on Patient Data Description",tag:"00103001"},{name:"Patient's Birth Date",tag:"00100030"},{name:"Patient's Time",tag:"00100032"},{name:"Patient's Sex",tag:"00100040",enumeratedValues:["M","F","O"]},{name:"Quality Control Subject",tag:"00100200",enumeratedValues:["YES","NO"]},{name:"Patient's Size",tag:"00101020"},{name:"Patient's Weight",tag:"00101030"},{name:"Patient's Address",tag:"00101040"},{name:"Patient's Comments",tag:"00104000"},{name:"Patient's Responsabile Person",tag:"00102297"},{name:"Patient's Responsabile Person Role",tag:"00102298",enumeratedValues:["OWNER","PARENT","CHILD","SPOUSE","SIBLING","RELATIVE","GUARDIAN","CUSTODIAN","AGENT"]},{name:"Patient's Responsible Organization",tag:"00102299"},{name:"Patient Species Description",tag:"00102201"},{name:"Patient Breed Description",tag:"00102292"}],R=[{name:"Study Date",tag:"00080020"},{name:"Study Time",tag:"00080030"},{name:"Accession Number",tag:"00080050"},{name:"Referring Physician Name",tag:"00080090"},{name:"Consulting Physician Name",tag:"0008009C"},{name:"Study Description",tag:"00081030"},{name:"Physicians Of Record",tag:"00081048"},{name:"Name Of Physicians Reading Study",tag:"00081060"},{name:"StudyID",tag:"00200010"},{name:"Requesting Service",tag:"00321033"},{name:"Admitting Diagnoses Description",tag:"00081080"},{name:"Study Instance UID",tag:"0020000D",hide:!0,compare:!0}],A=[{name:"Series Date",tag:"00080021"},{name:"Series Time",tag:"00080031"},{name:"Modality",tag:"00080060"},{name:"Series Description",tag:"0008103E"},{name:"Performing Physician's Name",tag:"00081050"},{name:"Operators' Name",tag:"00081070"},{name:"Anatomical Orientation Type",tag:"00102210",enumeratedValues:["BIPED","QUADRUPED"]},{name:"Body Part Examined",tag:"00180015"},{name:"Protocol Name",tag:"00181030"},{name:"Patient Position",tag:"00185100"},{name:"Series Number",tag:"00200011"},{name:"Laterality",tag:"00200060"},{name:"Smallest Pixel Value in Series",tag:"00280108"},{name:"Largest Pixel Value in Series",tag:"00280109"},{name:"Performed Procedure Step Start Date",tag:"00400244"},{name:"Performed Procedure Step Start Time",tag:"00400245"},{name:"Performed Procedure Step End Date",tag:"00400250"},{name:"Performed Procedure Step End Time",tag:"00400251"},{name:"Performed Procedure Step ID",tag:"00400253"},{name:"Performed Procedure Step Description",tag:"00400254"},{name:"Comments on the Performed Procedure Step",tag:"00400280"},{name:"Series Instance UID",tag:"0020000E",hide:!0,compare:!0},{name:"Manufacturer",tag:"00080070"},{name:"Station Name",tag:"00081010"},{name:"Institution Name",tag:"00080080"},{name:"Institution Address",tag:"00080081"},{name:"Manufacturer's Model Name",tag:"00081090"},{name:"Device Serial Number",tag:"00181000"},{name:"Device UID",tag:"00181002"},{name:"Gantry ID",tag:"00181008"},{name:"Manufacturer's Device Class UID",tag:"0018100B"},{name:"Software Versions",tag:"00181020"},{name:"Spatial Resolution",tag:"00181050"},{name:"Date of Last Calibration",tag:"00181200"},{name:"Time of Last Calibration",tag:"00181201"},{name:"Pixel Padding Value",tag:"0028,0120"},{name:"Derivation Description",tag:"00082111"}],M=[{name:"Image Type",tag:"00080008"},{name:"Acquisition Date",tag:"00080022"},{name:"Content Date",tag:"00080023"},{name:"Acquisition DateTime",tag:"0008002A"},{name:"Acquisition Time",tag:"00080032"},{name:"Content Time",tag:"00080033"},{name:"Irradiation Event UID",tag:"00083010"},{name:"Acquisition Number",tag:"00200012"},{name:"Patient Orientation",tag:"00200020"},{name:"Image Laterality",tag:"00200062"},{name:"Images in Acquisition",tag:"00201002"},{name:"Image Comments",tag:"00204000"},{name:"Quality Control Image",tag:"00280300"},{name:"Burned In Annotation",tag:"0028,0301"},{name:"Recognizable Visual Features",tag:"0028,0302",enumeratedValues:["YES","NO"]},{name:"Lossy Image Compression",tag:"0028,2110",enumeratedValues:["00","01"]},{name:"Lossy Image Compression Ratio",tag:"00282112"},{name:"Lossy Image Compression Method",tag:"00282114"},{name:"Presentation LUT Shape",tag:"20500020",enumeratedValues:["IDENTITY","INVERSE"]},{name:"Samples per Pixel",tag:"00280002"},{name:"Photometric Interpretation",tag:"00280004",enumeratedValues:["MONOCHROME1","MONOCHROME2","PALETTE COLOR","RGB","HSV","ARGB","CMYK","YBR_FULL","YBR_FULL_422","YBR_PARTIAL_422","YBR_PARTIAL_420","YBR_ICT","YBR_RCT"]},{name:"Planar Configuration",tag:"00280006"},{name:"Rows",tag:"00280010"},{name:"Columns",tag:"00280011"},{name:"Pixel Aspect Ratio",tag:"00280034"},{name:"Bits Allocated",tag:"00280100"},{name:"Bits Stored",tag:"00280101"},{name:"High Bit",tag:"00280102"},{name:"Pixel Representation",tag:"00280103"},{name:"Smallest Image Pixel Value",tag:"00280106"},{name:"Largest Image Pixel Value",tag:"00280107"},{name:"Pixel Padding Range",tag:"00280121"},{name:"Red Palette Color Lookup Table Descriptor",tag:"00281101"},{name:"Green Palette Color Lookup Table Descriptor",tag:"00281102"},{name:"Blue Palette Color Lookup Table Descriptor",tag:"00281103"},{name:"Color Space",tag:"00282002"},{name:"Pixel Data Provider URL",tag:"00287FE0"}],E=a(120).data.DicomMessage,L=function(){function e(t){Object(y.a)(this,e),this.dataset=void 0,this.dataset=E.readFile(t)}return Object(I.a)(e,[{key:"get",value:function(e){return this.getDict(e)[e]}},{key:"set",value:function(e,t){var a=this.getDict(e)[e];if(!a)throw new Error("Not supported");a.Value[0]=t}},{key:"has",value:function(e){return null!=this.getDict(e)[e]}},{key:"write",value:function(){return this.dataset.write({allowInvalidVRLength:!0,fragmentMultiframe:!1})}},{key:"getDict",value:function(e){return e.startsWith("0002")?this.dataset.meta:this.dataset.dict}}]),e}(),B=function(){function e(){Object(y.a)(this,e),this.studyUIDs=new Map,this.seriesUIDs=new Map}return Object(I.a)(e,[{key:"replace",value:function(e){var t=e.studyUID,a=e.seriesUID,n=e.instanceUID;return{studyUID:this.getStudyUID(t),seriesUID:this.getSeriesUID(a),instanceUID:this.newUID(n)}}},{key:"getStudyUID",value:function(e){return this.studyUIDs.has(e)||this.studyUIDs.set(e,this.newUID(e)),this.studyUIDs.get(e)}},{key:"getSeriesUID",value:function(e){return this.seriesUIDs.has(e)||this.seriesUIDs.set(e,this.newUID(e)),this.seriesUIDs.get(e)}},{key:"newUID",value:function(e){var t=(new Date).getTime(),a=Math.round(1e6*Math.random()),n="".concat(t,".").concat(a);return e.substr(0,64-n.length)+n}}]),e}(),V=a(81),F=a.n(V),z="0020000D",G="0020000E",_="00080018",q=function(){function e(){Object(y.a)(this,e)}return Object(I.a)(e,null,[{key:"Extact",value:function(){var e=Object(i.a)(r.a.mark((function e(t,a){var n,i,s,c,o,u,l,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],t=t.filter((function(e){return!e.name.endsWith("DICOMDIR")})),i=0;case 3:if(!(i<t.length)){e.next=12;break}return e.next=6,this.readFile(t[i]);case 6:s=e.sent,this.sanityCheck(s)&&(c=new L(s),o=new T(c,U),u=new T(c,R),l=new T(c,A),m=new T(c,M),this.add(n,o,u,l,m,t[i])),a({done:i+1,total:t.length});case 9:i++,e.next=3;break;case 12:return e.abrupt("return",{patients:n});case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"Modify",value:function(){var t=Object(i.a)(r.a.mark((function t(a,n,i){var s,c,o,u,l,m,d,g,h,f,p,b,j,x,v,y,I,D,k,S,w,C,T,U,R;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=new F.a,c=new B,o=P(a.patients),u=0,l=Object(O.a)(N(a.patients)),t.prev=5,l.s();case 7:if((m=l.n()).done){t.next=57;break}d=m.value,g=d.patient,h=d.study,f=d.series,p=d.patIndex,b=d.stuIndex,j=d.serindex,x=0,v=Object(O.a)(f.images),t.prev=11,v.s();case 13:if((y=v.n()).done){t.next=47;break}I=y.value,D=Object(O.a)(I.files),t.prev=16,D.s();case 18:if((k=D.n()).done){t.next=37;break}return S=k.value,t.next=22,this.readFile(S);case 22:return w=t.sent,C=new L(w),g.tags.Modify(C),h.tags.Modify(C),f.tags.Modify(C),I.tags.Modify(C),n&&e.replaceUIDs(C,c),x++,T=C.write(),U=this.imageFilename(p,b,j,x),s.file(U,T,{binary:!0,createFolders:!0}),t.next=35,i("processing",{total:o,done:++u});case 35:t.next=18;break;case 37:t.next=42;break;case 39:t.prev=39,t.t0=t.catch(16),D.e(t.t0);case 42:return t.prev=42,D.f(),t.finish(42);case 45:t.next=13;break;case 47:t.next=52;break;case 49:t.prev=49,t.t1=t.catch(11),v.e(t.t1);case 52:return t.prev=52,v.f(),t.finish(52);case 55:t.next=7;break;case 57:t.next=62;break;case 59:t.prev=59,t.t2=t.catch(5),l.e(t.t2);case 62:return t.prev=62,l.f(),t.finish(62);case 65:return t.next=67,s.generateAsync({type:"arraybuffer"},(function(e){i("zipping",{total:100,done:e.percent})}));case 67:return R=t.sent,t.abrupt("return",R);case 69:case"end":return t.stop()}}),t,this,[[5,59,62,65],[11,49,52,55],[16,39,42,45]])})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"imageFilename",value:function(e,t,a,n){return"PAT"+k(e,2)+"/STU"+k(t,2)+"/SER"+k(a,3)+"/IMG"+k(n,5)+".dcm"}},{key:"replaceUIDs",value:function(e,t){var a=e.get(z).Value[0].toString(),n=e.get(G).Value[0].toString(),r=e.get(_).Value[0].toString(),i=t.replace({studyUID:a,seriesUID:n,instanceUID:r});e.set(z,i.studyUID),e.set(G,i.seriesUID),e.set(_,i.instanceUID),e.set("00020003",i.instanceUID)}},{key:"add",value:function(e,t,a,n,r,i){var s=e.find((function(e){return e.tags.isEqual(t)}));s||(s={tags:t,studies:[]},e.push(s)),s.tags.Merge(t);var c=s.studies.find((function(e){return e.tags.isEqual(a)}));c||(c={tags:a,series:[]},s.studies.push(c)),c.tags.Merge(a);var o=c.series.find((function(e){return e.tags.isEqual(n)}));o||(o={tags:n,images:[]},c.series.push(o)),o.tags.Merge(n);var u=o.images.find((function(e){return e.tags.isEqual(r)}));u||(u={tags:r,files:[]},o.images.push(u)),u.tags.Merge(r),u.files.push(i)}},{key:"readFile",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a=new FileReader;a.onloadend=function(){return e(a.result)},a.readAsArrayBuffer(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"sanityCheck",value:function(e){var t=new Uint8Array(e),a=t.length>131;return a&&(a=68===t[128]&&73===t[129]&&67===t[130]&&77===t[131]),a}}]),e}(),W=a(167),Y=a(181),H=a(6),J=a(2),Q=Object(H.a)({root:{height:12,borderRadius:20},bar:{borderRadius:20}})(W.a);function K(e){return Object(J.jsxs)(Y.a,{sx:{display:"flex",width:"80%",alignItems:"center"},children:[Object(J.jsx)(Y.a,{sx:{width:"100%",mr:1},children:Object(J.jsx)(Q,Object(d.a)({variant:"determinate"},e))}),Object(J.jsx)(Y.a,{sx:{minWidth:35},children:Object(J.jsx)(v.a,{className:"text",children:"".concat(Math.round(e.value),"%")})})]})}var Z=a(177),$=a(68),X=Object(f.a)((function(e){return{paper:{width:"100%"},avatar:{backgroundColor:$.a[500],width:e.spacing(4),height:e.spacing(4)},boldtext:{fontWeight:"bolder",marginLeft:e.spacing(1),marginRight:e.spacing(1)},smallText:{fontSize:"small"},noPadding:{padding:"0px"},rightMargin:{marginRight:e.spacing(2)},leftMargin:{marginLeft:e.spacing(2)},topBottomMarging:{marginBottom:e.spacing(1),marginTop:e.spacing(1)},topBottomPadding:{paddingBottom:e.spacing(2),paddingTop:e.spacing(2)},fullPage:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",borderWidth:"2px",borderStyle:"solid",borderColor:e.palette.primary.light,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}}})),ee=a(169),te=a(182),ae=a(171);function ne(e){var t=e.align,a=e.children;return Object(J.jsx)(Y.a,{sx:{display:"flex",width:"100%",alignItems:"center",marginTop:"4px",marginBottom:"4px",justifyContent:"".concat(t)},children:a})}function re(e){var t=e.numDicomFiles,a=e.onDownload,n=Object(s.useState)(!0),r=Object(g.a)(n,2),i=r[0],c=r[1],o=X();return Object(J.jsx)(ee.a,{elevation:3,className:o.paper,children:Object(J.jsxs)(ne,{align:"center",children:[Object(J.jsx)(v.a,{color:"primary",children:"Number of Image Files: "}),Object(J.jsx)(v.a,{className:"".concat(o.boldtext," ").concat(o.rightMargin),children:t}),Object(J.jsx)(te.a,{checked:i,color:"primary",className:"".concat(o.noPadding," ").concat(o.leftMargin),onClick:function(){return c((function(e){return!e}))}}),Object(J.jsx)(v.a,{color:"primary",className:o.rightMargin,children:" replace current UIDs"}),Object(J.jsx)(ae.a,{variant:"contained",color:"primary",className:"".concat(o.topBottomMarging," ").concat(o.leftMargin),onClick:function(){return a(i)},children:"  Download Images "})]})})}function ie(e){var t,a,n,r,i=e.left,s=e.right,c=e.top,o=e.bottom,u=e.children;return c=null!==(t=c)&&void 0!==t?t:0,o=null!==(a=o)&&void 0!==a?a:0,i=null!==(n=i)&&void 0!==n?n:0,s=null!==(r=s)&&void 0!==r?r:0,Object(J.jsx)(Y.a,{sx:{display:"flex",marginLeft:"".concat(i,"px"),marginRight:"".concat(s,"px"),marginTop:"".concat(c,"px"),marginBottom:"".concat(o,"px"),flexDirection:"column",alignItems:"flexend",justifyContent:"center"},children:u})}var se=a(175),ce=a(176),oe=a(47),ue=a(170),le=a(86),me=a.n(le),de=a(5),ge=Object(f.a)((function(e){return{expand:{transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));function he(e){var t=e.onExpand,a=e.className,n=e.size,r=c.a.useState(!1),i=Object(g.a)(r,2),s=i[0],o=i[1],u=ge();return Object(J.jsx)(ue.a,{className:Object(de.a)(u.expand+" "+a,Object(oe.a)({},u.expandOpen,s)),onClick:function(){t(!s),o(!s)},"aria-expanded":s,"aria-label":"show more",children:Object(J.jsx)(me.a,{color:"primary",fontSize:n})})}var fe=a(180),pe=a(174),be=a(88),je=a.n(be),xe=a(185);function ve(e){var t=e.tag,a=Object(s.useState)(!1),n=Object(g.a)(a,2),r=n[0],i=n[1],c=t.otherValues.join(",");return Object(J.jsx)(fe.a,{id:"standard-helperText",label:t.name,defaultValue:t.value?t.value:" ",variant:"outlined",style:{width:"100%"},onChange:function(e){return function(e){var a=t.setValue(e.trim());i(!a)}(e.target.value)},error:r,InputProps:{endAdornment:c.length?Object(J.jsx)(pe.a,{position:"end",children:Object(J.jsx)(xe.a,{title:"other values : ".concat(c),children:Object(J.jsx)(je.a,{})})}):Object(J.jsx)(J.Fragment,{})}})}function Oe(e){var t=e.tags,a=e.subItemText,n=e.subItemNum,r=e.children,i=c.a.useState(!1),s=Object(g.a)(i,2),o=s[0],u=s[1],l=X();return Object(J.jsx)(ee.a,{elevation:2,className:"".concat(l.paper," ").concat(l.topBottomPadding,", ").concat(l.topBottomMarging),children:Object(J.jsxs)(ie,{left:8,right:8,top:8,bottom:0,children:[Object(J.jsx)(se.a,{container:!0,spacing:1,children:t.valueList.filter((function(e){return!e.isHidden})).map((function(e,t){return Object(J.jsx)(se.a,{item:!0,xs:8,sm:4,md:2,xl:2,children:Object(J.jsx)(ve,{tag:e})},t)}))}),Object(J.jsxs)(ne,{align:"left",children:[Object(J.jsx)(v.a,{color:"primary",className:"".concat(l.smallText," ").concat(l.leftMargin),children:a}),Object(J.jsx)(v.a,{color:"primary",className:"".concat(l.boldtext," ").concat(l.smallText),children:n}),Object(J.jsx)(he,{onExpand:function(e){return u(e)},className:l.noPadding})]}),Object(J.jsx)(ce.a,{in:o,children:r})]})})}function ye(e){var t=e.image,a=X();return Object(J.jsx)(Oe,{tags:t.tags,subItemText:"Number of Files:",subItemNum:t.files.length,children:Object(J.jsx)(v.a,{color:"primary",className:"".concat(a.smallText," ").concat(a.leftMargin),style:{textAlign:"left"},children:t.files.map((function(e,t){return"".concat(t>0?", ":"").concat(e.name)}))})})}function Ie(e){var t=e.series;return Object(J.jsx)(Oe,{tags:t.tags,subItemText:"Number of Images:",subItemNum:t.images.reduce((function(e,t){return e+t.files.length}),0),children:Object(J.jsx)(ie,{left:8,right:8,children:t.images.map((function(e,t){return Object(J.jsx)(ye,{image:e},t)}))})})}function De(e){var t=e.study;return Object(J.jsx)(Oe,{tags:t.tags,subItemText:"Number of Series:",subItemNum:t.series.length,children:Object(J.jsx)(ie,{left:8,right:8,children:t.series.map((function(e,t){return Object(J.jsx)(Ie,{series:e},t)}))})})}function Ne(e){var t=e.patient;return Object(J.jsx)(Oe,{tags:t.tags,subItemText:"Number of Studies:",subItemNum:t.studies.length,children:Object(J.jsx)(ie,{left:8,right:8,children:t.studies.map((function(e,t){return Object(J.jsx)(De,{study:e},t)}))})})}function Pe(e){var t=e.patients,a=X();return Object(J.jsx)(ee.a,{elevation:3,className:"".concat(a.paper," ").concat(a.topBottomPadding),children:Object(J.jsx)(ie,{left:8,right:8,children:t.map((function(e,t){return Object(J.jsx)(Ne,{patient:e},t)}))})})}var ke="Processing ...";function Se(e){var t=Object(s.useState)(ke),a=Object(g.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(!1),c=Object(g.a)(i,2),o=c[0],u=c[1],l=Object(s.useState)({done:0,total:0}),m=Object(g.a)(l,2),d=m[0],h=m[1],f=X(),p=Object(s.useCallback)((function(t){u(!0);q.Modify(e,t,(function(e,t){r("processing"===e?ke:"Zipping ..."),h(t)})).then((function(e){var t,a=new Blob([e],{type:"application/octet-stream"}),n=URL.createObjectURL(a),r=document.createElement("a");r.setAttribute("download","images.zip"),r.setAttribute("href",n),r.click(),t=n,setTimeout((function(){return URL.revokeObjectURL(t)}),1e3),u(!1)}))}),[h,r,e]);return Object(J.jsx)(Z.a,{maxWidth:"xl",children:o?Object(J.jsx)(J.Fragment,{children:Object(J.jsxs)("div",{className:f.fullPage,children:[Object(J.jsxs)(v.a,{color:"primary",variant:"h2",className:"text",children:[" ",n," "]}),Object(J.jsx)(K,{value:100*d.done/d.total})]})}):Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(re,{numDicomFiles:P(e.patients),onDownload:p}),Object(J.jsx)(Pe,{patients:e.patients})]})})}var we=Object(f.a)((function(e){return{root:{width:"100%",height:"100%",padding:"4px"},drop:{width:"100%",height:"100%",borderWidth:"2px",borderStyle:"dotted",borderColor:e.palette.primary.light,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column","&:hover":{borderColor:e.palette.primary.dark},"& .AddIcn":{fontSize:80,color:e.palette.primary.light},"&:hover .AddIcn":{fontSize:80,color:e.palette.primary.dark},"& .text":{textAlign:"center",color:e.palette.primary.light},"&:hover .text":{textAlign:"center",color:e.palette.primary.dark}},noDisplay:{display:"none"}}}));function Ce(){var e=we(),t=Object(s.useState)({done:0,total:0}),a=Object(g.a)(t,2),n=a[0],c=a[1],o=Object(s.useState)(null),u=Object(g.a)(o,2),l=u[0],m=u[1],f=Object(s.useState)(null),p=Object(g.a)(f,2),j=p[0],O=p[1],y=Object(s.useCallback)(function(){var e=Object(i.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(null),a=function(e){return c(e)},e.next=4,q.Extact(t,a);case 4:P((n=e.sent).patients)>0?m(n):O("The ".concat(t.length," file selected are not valid DICOM files")),c({done:0,total:0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[O,c]),I=Object(h.a)({onDrop:y}),D=I.getRootProps,N=I.getInputProps,k=I.isDragActive;return Object(J.jsx)("div",{className:e.root,children:Object(J.jsxs)("div",Object(d.a)(Object(d.a)({},D()),{},{className:e.root,"test-id":"drop-div",children:[Object(J.jsxs)("div",{className:k?e.drop:e.noDisplay,"test-id":"drop-active-div",children:[Object(J.jsx)(x.a,{className:"AddIcn"}),Object(J.jsx)(v.a,{className:"text",children:"Drop the file here."})]}),null!==l?Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(Se,Object(d.a)({},l))}):n.total>0?Object(J.jsx)(J.Fragment,{children:Object(J.jsxs)("div",{className:e.drop,children:[Object(J.jsx)(v.a,{color:"primary",variant:"h2",className:"text",children:" Loading ... "}),Object(J.jsx)(K,{value:100*n.done/n.total})]})}):Object(J.jsxs)("div",{className:k?e.noDisplay:e.drop,"test-id":"drop-inactive-div",children:[Object(J.jsx)("input",Object(d.a)({},N())),Object(J.jsx)(b.a,{className:"AddIcn"}),null!==j?Object(J.jsx)(J.Fragment,{children:Object(J.jsxs)(v.a,{className:"text",children:["\ud83d\udd90 ",j]})}):Object(J.jsx)(J.Fragment,{}),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(v.a,{className:"text",children:"Drag and Drop here your DICOM files or folders here."}),Object(J.jsx)(v.a,{className:"text",children:"or click here to select the files."})]})]})]}))})}var Te=a(95),Ue=a(184),Re=a(178),Ae=a(179),Me=a(183),Ee=a(69),Le=Object(f.a)((function(e){return{version:{position:"fixed",left:"2px",bottom:"0px",fontSize:"12px",color:e.palette.primary.main,transform:"rotate(-90deg)",transformOrigin:"0 0"},ribbon:{position:"fixed",right:"0px",top:"0px"}}})),Be=function(e){var t=e.label,a=e.baseURL,n=e.forkme,r=Le();return Object(J.jsxs)(J.Fragment,{children:[n&&a&&Object(J.jsx)("div",{className:r.ribbon,children:Object(J.jsx)("a",{href:a,children:Object(J.jsx)("img",{width:"100",height:"100",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_red_aa0000.png?resize=100%2C100",alt:"Fork me on GitHub"})})}),Object(J.jsx)("div",{className:r.version,onClick:function(){a&&""!==Ee.long&&(window.location.href=a+"/tree/"+Ee.long)},children:Object(J.jsx)("p",{children:t+Ee.version})})]})},Ve=Object(Te.a)({palette:{primary:m.a,secondary:{main:"#fff"},background:{default:"#fff"}}}),Fe=Object(H.a)((function(e){return Object(Ue.a)({app:{textAlign:"center"},main:{position:"absolute",top:"0px",right:"0px",left:"0px",bottom:"0px",background:"white",display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var t=e.classes;return Object(J.jsxs)(Re.a,{theme:Ve,children:[Object(J.jsx)(Ae.a,{}),Object(J.jsxs)("div",{className:t.app,children:[Object(J.jsx)("div",{className:t.main,children:Object(J.jsx)(Ce,{})}),Object(J.jsx)(Me.a,{smDown:!0,children:Object(J.jsx)(Be,{label:"version : ",forkme:!0,baseURL:"https://github.com/VittorioAccomazzi/DicomEditor"})})]})]})})),ze=a(96),Ge=Object(ze.a)({reducer:{}}),_e=a(94);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qe=new(a(93).a)("G-GCL436FGEE",void 0,void 0,3e4),We=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.initialize();case 2:u.a.render(Object(J.jsx)(_e.a,{store:Ge,children:Object(J.jsx)(Fe,{})}),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();We(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},69:function(e){e.exports=JSON.parse('{"version":"e209cb3\\n","long":"e209cb3842d8e107eff5a3549782260771a16b61\\n"}')}},[[134,1,2]]]);
//# sourceMappingURL=main.71aeb043.chunk.js.map