(this["webpackJsonpdise-react"]=this["webpackJsonpdise-react"]||[]).push([[0],{133:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),s=n.n(i),c=n(91),o=n.n(c),u=n(41),l=n(19),d=n.n(l),m=n(37),h=n(15),g=n(96),p=n(167),f=n(90),j=n.n(f),b=n(89),x=n.n(b),v=n(135),O=n(30),y=n(17),D=n(18),I=d.a.mark(N);function N(e){var t,n,a,r,i,s,c,o,u,l,m,h;return d.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:t=Object(O.a)(e),d.prev=1,t.s();case 3:if((n=t.n()).done){d.next=42;break}a=n.value,r=e.indexOf(a),i=Object(O.a)(a.studies),d.prev=7,i.s();case 9:if((s=i.n()).done){d.next=32;break}c=s.value,o=a.studies.indexOf(c),u=Object(O.a)(c.series),d.prev=13,u.s();case 15:if((l=u.n()).done){d.next=22;break}return m=l.value,h=c.series.indexOf(m),d.next=20,{patient:a,study:c,series:m,patIndex:r,stuIndex:o,serindex:h};case 20:d.next=15;break;case 22:d.next=27;break;case 24:d.prev=24,d.t0=d.catch(13),u.e(d.t0);case 27:return d.prev=27,u.f(),d.finish(27);case 30:d.next=9;break;case 32:d.next=37;break;case 34:d.prev=34,d.t1=d.catch(7),i.e(d.t1);case 37:return d.prev=37,i.f(),d.finish(37);case 40:d.next=3;break;case 42:d.next=47;break;case 44:d.prev=44,d.t2=d.catch(1),t.e(d.t2);case 47:return d.prev=47,t.f(),d.finish(47);case 50:case"end":return d.stop()}}),I,null,[[1,44,47,50],[7,34,37,40],[13,24,27,30]])}function k(e){var t,n=0,a=Object(O.a)(N(e));try{for(a.s();!(t=a.n()).done;){n+=t.value.series.files.length}}catch(r){a.e(r)}finally{a.f()}return n}function S(e,t){var n=Math.round(e).toString(),a=t>n.length?t-n.length:0;return"0".repeat(a)+n}var P=n(97),w=[{vr:"AE",len:16,isNumeric:!1},{vr:"AS",len:4,isNumeric:!1},{vr:"AT",len:4,isNumeric:!1},{vr:"CS",len:16,isNumeric:!1},{vr:"DA",len:8,isNumeric:!1},{vr:"DS",len:16,isNumeric:!0},{vr:"DT",len:26,isNumeric:!0},{vr:"IS",len:12,isNumeric:!0},{vr:"LO",len:64,isNumeric:!1},{vr:"LT",len:10240,isNumeric:!1},{vr:"OB",len:100,isNumeric:!1},{vr:"OD",len:100,isNumeric:!1},{vr:"OF",len:100,isNumeric:!1},{vr:"SH",len:16,isNumeric:!1},{vr:"ST",len:1024,isNumeric:!1},{vr:"TM",len:14,isNumeric:!0},{vr:"UI",len:64,isNumeric:!0}],U=function(){function e(t,n,a){Object(y.a)(this,e),this.tag=void 0,this.val=void 0,this.vr=void 0,this.org=void 0,this.other=void 0,this.tag=t,this.val=a,this.org=a,this.vr=n,this.other=[]}return Object(D.a)(e,[{key:"name",get:function(){return this.tag.name}},{key:"value",get:function(){return this.val}},{key:"isModified",get:function(){return this.org!==this.val}},{key:"isHidden",get:function(){return this.tag.hide||!1}},{key:"isCompare",get:function(){return this.tag.compare||!1}},{key:"dcmTag",get:function(){return this.tag.tag}},{key:"otherValues",get:function(){return this.other}},{key:"isSame",value:function(e){return this.tag===e.tag&&this.val===e.val}},{key:"setValue",value:function(e){var t=this,n=!0,a=w.find((function(e){return t.vr===e.vr}));a&&((n=e.length<=a.len)&&a.isNumeric&&(n=Object(P.a)(e).map((function(e){return"0123456789.+-Ee,".includes(e)})).reduce((function(e,t){return e&&t}),!0)));if(n&&this.tag.enumeratedValues&&(n=void 0!==this.tag.enumeratedValues.find((function(t){return t===e}))),n&&"DA"===this.vr){var r=0,i=0;8===e.length&&(r=parseInt(e.substr(4,2)),i=parseInt(e.substr(6,2))),n=r>0&&r<13&&i>0&&i<32}return n&&(this.val=e),n}},{key:"addOtherValue",value:function(e){this.other.includes(e)||this.other.push(e)}}]),e}(),T=function(){function e(t,n){var a=this;Object(y.a)(this,e),this.list=void 0,this.list=[],n.forEach((function(e){var n=t.get(e.tag);n&&n.Value&&n.Value.length>0&&a.list.push(new U(e,n.vr,n.Value[0].toString()))}))}return Object(D.a)(e,[{key:"valueList",get:function(){return this.list}},{key:"isEqual",value:function(e){var t=this.list.filter((function(e){return e.isCompare})),n=e.list.filter((function(e){return e.isCompare})),a=n.length===t.length;a&&(a=!t.map((function(e){return n.find((function(t){return t.isSame(e)}))})).some((function(e){return!e})));return a}},{key:"Modify",value:function(e){var t,n=Object(O.a)(this.valueList);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.isModified&&e.has(a.dcmTag)&&e.set(a.dcmTag,a.value)}}catch(r){n.e(r)}finally{n.f()}}},{key:"Merge",value:function(e){var t=this;e.list.forEach((function(e){var n=t.list.find((function(t){return t.dcmTag===e.dcmTag}));n?n.value!==e.value&&n.addOtherValue(e.value):t.list.push(e)}))}}]),e}(),M=[{name:"Patient Name",tag:"00100010",compare:!0},{name:"Patient ID",tag:"00100020",compare:!0},{name:"Other Patient IDs",tag:"00101000"},{name:"Type of Patient ID",tag:"00100022"},{name:"Other Patient Names",tag:"00101001"},{name:"Patient's Birth Name",tag:"00101005"},{name:"Patient Mother's Birth Name",tag:"00101060"},{name:"Patient Age",tag:"00101010"},{name:"Patient's Occupation",tag:"00102180"},{name:"Confidentiality Constraint on Patient Data Description",tag:"00103001"},{name:"Patient's Birth Date",tag:"00100030"},{name:"Patient's Time",tag:"00100032"},{name:"Patient's Sex",tag:"00100040",enumeratedValues:["M","F","O"]},{name:"Quality Control Subject",tag:"00100200",enumeratedValues:["YES","NO"]},{name:"Patient's Size",tag:"00101020"},{name:"Patient's Weight",tag:"00101030"},{name:"Patient's Address",tag:"00101040"},{name:"Patient's Comments",tag:"00104000"},{name:"Patient's Responsabile Person",tag:"00102297"},{name:"Patient's Responsabile Person Role",tag:"00102298",enumeratedValues:["OWNER","PARENT","CHILD","SPOUSE","SIBLING","RELATIVE","GUARDIAN","CUSTODIAN","AGENT"]},{name:"Patient's Responsible Organization",tag:"00102299"},{name:"Patient Species Description",tag:"00102201"},{name:"Patient Breed Description",tag:"00102292"}],A=[{name:"Study Date",tag:"00080020"},{name:"Study Time",tag:"00080030"},{name:"Accession Number",tag:"00080050"},{name:"Referring Physician Name",tag:"00080090"},{name:"Consulting Physician Name",tag:"0008009C"},{name:"Study Description",tag:"00081030"},{name:"Physicians Of Record",tag:"00081048"},{name:"Name Of Physicians Reading Study",tag:"00081060"},{name:"StudyID",tag:"00200010"},{name:"Requesting Service",tag:"00321033"},{name:"Admitting Diagnoses Description",tag:"00081080"},{name:"Study Instance UID",tag:"0020000D",hide:!0,compare:!0}],C=[{name:"Series Date",tag:"00080021"},{name:"Series Time",tag:"00080031"},{name:"Modality",tag:"00080060"},{name:"Series Description",tag:"0008103E"},{name:"Performing Physician's Name",tag:"00081050"},{name:"Operators' Name",tag:"00081070"},{name:"Anatomical Orientation Type",tag:"00102210",enumeratedValues:["BIPED","QUADRUPED"]},{name:"Body Part Examined",tag:"00180015"},{name:"Protocol Name",tag:"00181030"},{name:"Patient Position",tag:"00185100"},{name:"Series Number",tag:"00200011"},{name:"Laterality",tag:"00200060"},{name:"Smallest Pixel Value in Series",tag:"00280108"},{name:"Largest Pixel Value in Series",tag:"00280109"},{name:"Performed Procedure Step Start Date",tag:"00400244"},{name:"Performed Procedure Step Start Time",tag:"00400245"},{name:"Performed Procedure Step End Date",tag:"00400250"},{name:"Performed Procedure Step End Time",tag:"00400251"},{name:"Performed Procedure Step ID",tag:"00400253"},{name:"Performed Procedure Step Description",tag:"00400254"},{name:"Comments on the Performed Procedure Step",tag:"00400280"},{name:"Series Instance UID",tag:"0020000E",hide:!0,compare:!0}],E=n(119).data.DicomMessage,R=function(){function e(t){Object(y.a)(this,e),this.dataset=void 0,this.dataset=E.readFile(t)}return Object(D.a)(e,[{key:"get",value:function(e){return this.getDict(e)[e]}},{key:"set",value:function(e,t){var n=this.getDict(e)[e];if(!n)throw new Error("Not supported");n.Value[0]=t}},{key:"has",value:function(e){return null!=this.getDict(e)[e]}},{key:"write",value:function(){return this.dataset.write()}},{key:"getDict",value:function(e){return e.startsWith("0002")?this.dataset.meta:this.dataset.dict}}]),e}(),F=function(){function e(){Object(y.a)(this,e),this.studyUIDs=new Map,this.seriesUIDs=new Map}return Object(D.a)(e,[{key:"replace",value:function(e){var t=e.studyUID,n=e.seriesUID,a=e.instanceUID;return{studyUID:this.getStudyUID(t),seriesUID:this.getSeriesUID(n),instanceUID:this.newUID(a)}}},{key:"getStudyUID",value:function(e){return this.studyUIDs.has(e)||this.studyUIDs.set(e,this.newUID(e)),this.studyUIDs.get(e)}},{key:"getSeriesUID",value:function(e){return this.seriesUIDs.has(e)||this.seriesUIDs.set(e,this.newUID(e)),this.seriesUIDs.get(e)}},{key:"newUID",value:function(e){var t=(new Date).getTime(),n=Math.round(1e6*Math.random()),a="".concat(t,".").concat(n);return e.substr(0,64-a.length)+a}}]),e}(),V=n(81),B=n.n(V),L="0020000D",z="0020000E",W="00080018",q=function(){function e(){Object(y.a)(this,e)}return Object(D.a)(e,null,[{key:"Extact",value:function(){var e=Object(m.a)(d.a.mark((function e(t,n){var a,r,i,s,c,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],t=t.filter((function(e){return!e.name.endsWith("DICOMDIR")})),r=0;case 3:if(!(r<t.length)){e.next=12;break}return e.next=6,this.readFile(t[r]);case 6:i=e.sent,this.sanityCheck(i)&&(s=new R(i),c=new T(s,M),o=new T(s,A),u=new T(s,C),this.add(a,c,o,u,t[r])),n({done:r+1,total:t.length});case 9:r++,e.next=3;break;case 12:return e.abrupt("return",{patients:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Modify",value:function(){var t=Object(m.a)(d.a.mark((function t(n,a,r){var i,s,c,o,u,l,m,h,g,p,f,j,b,x,v,y,D,I,S,P,w,U;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=new B.a,s=new F,c=k(n.patients),o=0,u=Object(O.a)(N(n.patients)),t.prev=5,u.s();case 7:if((l=u.n()).done){t.next=41;break}m=l.value,h=m.patient,g=m.study,p=m.series,f=m.patIndex,j=m.stuIndex,b=m.serindex,x=0,v=Object(O.a)(p.files),t.prev=11,v.s();case 13:if((y=v.n()).done){t.next=31;break}return D=y.value,t.next=17,this.readFile(D);case 17:return I=t.sent,S=new R(I),h.tags.Modify(S),g.tags.Modify(S),p.tags.Modify(S),a&&e.replaceUIDs(S,s),x++,P=S.write(),w=this.imageFilename(f,j,b,x),i.file(w,P,{binary:!0,createFolders:!0}),t.next=29,r("processing",{total:c,done:++o});case 29:t.next=13;break;case 31:t.next=36;break;case 33:t.prev=33,t.t0=t.catch(11),v.e(t.t0);case 36:return t.prev=36,v.f(),t.finish(36);case 39:t.next=7;break;case 41:t.next=46;break;case 43:t.prev=43,t.t1=t.catch(5),u.e(t.t1);case 46:return t.prev=46,u.f(),t.finish(46);case 49:return t.next=51,i.generateAsync({type:"arraybuffer"},(function(e){r("zipping",{total:100,done:e.percent})}));case 51:return U=t.sent,t.abrupt("return",U);case 53:case"end":return t.stop()}}),t,this,[[5,43,46,49],[11,33,36,39]])})));return function(e,n,a){return t.apply(this,arguments)}}()},{key:"imageFilename",value:function(e,t,n,a){return"PAT"+S(e,2)+"/STU"+S(t,2)+"/SER"+S(n,3)+"/IMG"+S(a,5)+".dcm"}},{key:"replaceUIDs",value:function(e,t){var n=e.get(L).Value[0].toString(),a=e.get(z).Value[0].toString(),r=e.get(W).Value[0].toString(),i=t.replace({studyUID:n,seriesUID:a,instanceUID:r});e.set(L,i.studyUID),e.set(z,i.seriesUID),e.set(W,i.instanceUID),e.set("00020003",i.instanceUID)}},{key:"add",value:function(e,t,n,a,r){var i=e.find((function(e){return e.tags.isEqual(t)}));i||(i={tags:t,studies:[]},e.push(i)),i.tags.Merge(t);var s=i.studies.find((function(e){return e.tags.isEqual(n)}));s||(s={tags:n,series:[]},i.studies.push(s)),s.tags.Merge(n);var c=s.series.find((function(e){return e.tags.isEqual(a)}));c||(c={tags:a,files:[]},s.series.push(c)),c.files.push(r),c.tags.Merge(a)}},{key:"readFile",value:function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.readAsArrayBuffer(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"sanityCheck",value:function(e){var t=new Uint8Array(e),n=t.length>131;return n&&(n=68===t[128]&&73===t[129]&&67===t[130]&&77===t[131]),n}}]),e}(),G=n(166),H=n(180),J=n(6),_=n(2),Q=Object(J.a)({root:{height:12,borderRadius:20},bar:{borderRadius:20}})(G.a);function Y(e){return Object(_.jsxs)(H.a,{sx:{display:"flex",width:"80%",alignItems:"center"},children:[Object(_.jsx)(H.a,{sx:{width:"100%",mr:1},children:Object(_.jsx)(Q,Object(u.a)({variant:"determinate"},e))}),Object(_.jsx)(H.a,{sx:{minWidth:35},children:Object(_.jsx)(v.a,{className:"text",children:"".concat(Math.round(e.value),"%")})})]})}var Z=n(176),$=n(68),K=Object(p.a)((function(e){return{paper:{width:"100%"},avatar:{backgroundColor:$.a[500],width:e.spacing(4),height:e.spacing(4)},boldtext:{fontWeight:"bolder",marginLeft:e.spacing(1),marginRight:e.spacing(1)},smallText:{fontSize:"small"},noPadding:{padding:"0px"},rightMargin:{marginRight:e.spacing(2)},leftMargin:{marginLeft:e.spacing(2)},topBottomMarging:{marginBottom:e.spacing(1),marginTop:e.spacing(1)},topBottomPadding:{paddingBottom:e.spacing(2),paddingTop:e.spacing(2)},fullPage:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",borderWidth:"2px",borderStyle:"solid",borderColor:e.palette.primary.light,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}}})),X=n(168),ee=n(181),te=n(170);function ne(e){var t=e.align,n=e.children;return Object(_.jsx)(H.a,{sx:{display:"flex",width:"100%",alignItems:"center",marginTop:"4px",marginBottom:"4px",justifyContent:"".concat(t)},children:n})}function ae(e){var t=e.numDicomFiles,n=e.onDownload,r=Object(a.useState)(!0),i=Object(h.a)(r,2),s=i[0],c=i[1],o=K();return Object(_.jsx)(X.a,{elevation:3,className:o.paper,children:Object(_.jsxs)(ne,{align:"center",children:[Object(_.jsx)(v.a,{color:"primary",children:"Number of Image Files: "}),Object(_.jsx)(v.a,{className:"".concat(o.boldtext," ").concat(o.rightMargin),children:t}),Object(_.jsx)(ee.a,{checked:s,color:"primary",className:"".concat(o.noPadding," ").concat(o.leftMargin),onClick:function(){return c((function(e){return!e}))}}),Object(_.jsx)(v.a,{color:"primary",className:o.rightMargin,children:" replace current UIDs"}),Object(_.jsx)(te.a,{variant:"contained",color:"primary",className:"".concat(o.topBottomMarging," ").concat(o.leftMargin),onClick:function(){return n(s)},children:"  Download Images "})]})})}function re(e){var t,n,a,r,i=e.left,s=e.right,c=e.top,o=e.bottom,u=e.children;return c=null!==(t=c)&&void 0!==t?t:0,o=null!==(n=o)&&void 0!==n?n:0,i=null!==(a=i)&&void 0!==a?a:0,s=null!==(r=s)&&void 0!==r?r:0,Object(_.jsx)(H.a,{sx:{display:"flex",marginLeft:"".concat(i,"px"),marginRight:"".concat(s,"px"),marginTop:"".concat(c,"px"),marginBottom:"".concat(o,"px"),flexDirection:"column",alignItems:"flexend",justifyContent:"center"},children:u})}var ie=n(174),se=n(175),ce=n(60),oe=n(169),ue=n(86),le=n.n(ue),de=n(5),me=Object(p.a)((function(e){return{expand:{transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));function he(e){var t=e.onExpand,n=e.className,a=e.size,i=r.a.useState(!1),s=Object(h.a)(i,2),c=s[0],o=s[1],u=me();return Object(_.jsx)(oe.a,{className:Object(de.a)(u.expand+" "+n,Object(ce.a)({},u.expandOpen,c)),onClick:function(){t(!c),o(!c)},"aria-expanded":c,"aria-label":"show more",children:Object(_.jsx)(le.a,{color:"primary",fontSize:a})})}var ge=n(179),pe=n(173),fe=n(88),je=n.n(fe),be=n(184);function xe(e){var t=e.tag,n=Object(a.useState)(!1),r=Object(h.a)(n,2),i=r[0],s=r[1],c=t.otherValues.join(",");return Object(_.jsx)(ge.a,{id:"standard-helperText",label:t.name,defaultValue:t.value?t.value:" ",variant:"outlined",style:{width:"100%"},onChange:function(e){return function(e){var n=t.setValue(e.trim());s(!n)}(e.target.value)},error:i,InputProps:{endAdornment:c.length?Object(_.jsx)(pe.a,{position:"end",children:Object(_.jsx)(be.a,{title:"other values : ".concat(c),children:Object(_.jsx)(je.a,{})})}):Object(_.jsx)(_.Fragment,{})}})}function ve(e){var t=e.tags,n=e.subItemText,a=e.subItemNum,i=e.children,s=r.a.useState(!1),c=Object(h.a)(s,2),o=c[0],u=c[1],l=K();return Object(_.jsx)(X.a,{elevation:2,className:"".concat(l.paper," ").concat(l.topBottomPadding,", ").concat(l.topBottomMarging),children:Object(_.jsxs)(re,{left:8,right:8,top:8,bottom:0,children:[Object(_.jsx)(ie.a,{container:!0,spacing:1,children:t.valueList.filter((function(e){return!e.isHidden})).map((function(e,t){return Object(_.jsx)(ie.a,{item:!0,xs:8,sm:4,md:2,xl:2,children:Object(_.jsx)(xe,{tag:e})},t)}))}),Object(_.jsxs)(ne,{align:"left",children:[Object(_.jsx)(v.a,{color:"primary",className:"".concat(l.smallText," ").concat(l.leftMargin),children:n}),Object(_.jsx)(v.a,{color:"primary",className:"".concat(l.boldtext," ").concat(l.smallText),children:a}),Object(_.jsx)(he,{onExpand:function(e){return u(e)},className:l.noPadding})]}),Object(_.jsx)(se.a,{in:o,children:i})]})})}function Oe(e){var t=e.series,n=K();return Object(_.jsx)(ve,{tags:t.tags,subItemText:"Number of Files:",subItemNum:t.files.length,children:Object(_.jsx)(v.a,{color:"primary",className:"".concat(n.smallText," ").concat(n.leftMargin),style:{textAlign:"left"},children:t.files.map((function(e,t){return"".concat(t>0?", ":"").concat(e.name)}))})})}function ye(e){var t=e.study;return Object(_.jsx)(ve,{tags:t.tags,subItemText:"Number of Series:",subItemNum:t.series.length,children:Object(_.jsx)(re,{left:8,right:8,children:t.series.map((function(e,t){return Object(_.jsx)(Oe,{series:e},t)}))})})}function De(e){var t=e.patient;return Object(_.jsx)(ve,{tags:t.tags,subItemText:"Number of Studies:",subItemNum:t.studies.length,children:Object(_.jsx)(re,{left:8,right:8,children:t.studies.map((function(e,t){return Object(_.jsx)(ye,{study:e},t)}))})})}function Ie(e){var t=e.patients,n=K();return Object(_.jsx)(X.a,{elevation:3,className:"".concat(n.paper," ").concat(n.topBottomPadding),children:Object(_.jsx)(re,{left:8,right:8,children:t.map((function(e,t){return Object(_.jsx)(De,{patient:e},t)}))})})}var Ne="Processing ...";function ke(e){var t=Object(a.useState)(Ne),n=Object(h.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(!1),c=Object(h.a)(s,2),o=c[0],u=c[1],l=Object(a.useState)({done:0,total:0}),d=Object(h.a)(l,2),m=d[0],g=d[1],p=K(),f=Object(a.useCallback)((function(t){u(!0);q.Modify(e,t,(function(e,t){i("processing"===e?Ne:"Zipping ..."),g(t)})).then((function(e){var t,n=new Blob([e],{type:"application/octet-stream"}),a=URL.createObjectURL(n),r=document.createElement("a");r.setAttribute("download","images.zip"),r.setAttribute("href",a),r.click(),t=a,setTimeout((function(){return URL.revokeObjectURL(t)}),1e3),u(!1)}))}),[g,i,e]);return Object(_.jsx)(Z.a,{maxWidth:"xl",children:o?Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:p.fullPage,children:[Object(_.jsxs)(v.a,{color:"primary",variant:"h2",className:"text",children:[" ",r," "]}),Object(_.jsx)(Y,{value:100*m.done/m.total})]})}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ae,{numDicomFiles:k(e.patients),onDownload:f}),Object(_.jsx)(Ie,{patients:e.patients})]})})}var Se=Object(p.a)((function(e){return{root:{width:"100%",height:"100%",padding:"4px"},drop:{width:"100%",height:"100%",borderWidth:"2px",borderStyle:"dotted",borderColor:e.palette.primary.light,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column","&:hover":{borderColor:e.palette.primary.dark},"& .AddIcn":{fontSize:80,color:e.palette.primary.light},"&:hover .AddIcn":{fontSize:80,color:e.palette.primary.dark},"& .text":{textAlign:"center",color:e.palette.primary.light},"&:hover .text":{textAlign:"center",color:e.palette.primary.dark}},noDisplay:{display:"none"}}}));function Pe(){var e=Se(),t=Object(a.useState)({done:0,total:0}),n=Object(h.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(null),c=Object(h.a)(s,2),o=c[0],l=c[1],p=Object(a.useState)(null),f=Object(h.a)(p,2),b=f[0],O=f[1],y=Object(a.useCallback)(function(){var e=Object(m.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(null),n=function(e){return i(e)},e.next=4,q.Extact(t,n);case 4:k((a=e.sent).patients)>0?l(a):O("The ".concat(t.length," selected are not valid DICOM files")),i({done:0,total:0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[O,i]),D=Object(g.a)({onDrop:y}),I=D.getRootProps,N=D.getInputProps,S=D.isDragActive;return Object(_.jsx)("div",{className:e.root,children:Object(_.jsxs)("div",Object(u.a)(Object(u.a)({},I()),{},{className:e.root,"test-id":"drop-div",children:[Object(_.jsxs)("div",{className:S?e.drop:e.noDisplay,"test-id":"drop-active-div",children:[Object(_.jsx)(x.a,{className:"AddIcn"}),Object(_.jsx)(v.a,{className:"text",children:"Drop the file here."})]}),null!==o?Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(ke,Object(u.a)({},o))}):r.total>0?Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:e.drop,children:[Object(_.jsx)(v.a,{color:"primary",variant:"h2",className:"text",children:" Loading ... "}),Object(_.jsx)(Y,{value:100*r.done/r.total})]})}):Object(_.jsxs)("div",{className:S?e.noDisplay:e.drop,"test-id":"drop-inactive-div",children:[Object(_.jsx)("input",Object(u.a)({},N())),Object(_.jsx)(j.a,{className:"AddIcn"}),null!==b?Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(v.a,{className:"text",children:["\ud83d\udd90 ",b]})}):Object(_.jsx)(_.Fragment,{}),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(v.a,{className:"text",children:"Drag and Drop here your DICOM file."}),Object(_.jsx)(v.a,{className:"text",children:"or click here to select the file."})]})]})]}))})}var we=n(94),Ue=n(183),Te=n(177),Me=n(178),Ae=n(182),Ce=n(69),Ee=Object(p.a)((function(e){return{version:{position:"fixed",left:"2px",bottom:"0px",fontSize:"12px",color:e.palette.primary.main,transform:"rotate(-90deg)",transformOrigin:"0 0"},ribbon:{position:"fixed",right:"0px",top:"0px"}}})),Re=function(e){var t=e.label,n=e.baseURL,a=e.forkme,r=Ee();return Object(_.jsxs)(_.Fragment,{children:[a&&n&&Object(_.jsx)("div",{className:r.ribbon,children:Object(_.jsx)("a",{href:n,children:Object(_.jsx)("img",{width:"100",height:"100",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_red_aa0000.png?resize=100%2C100",alt:"Fork me on GitHub"})})}),Object(_.jsx)("div",{className:r.version,onClick:function(){n&&""!==Ce.long&&(window.location.href=n+"/tree/"+Ce.long)},children:Object(_.jsx)("p",{children:t+Ce.version})})]})},Fe=Object(we.a)({palette:{primary:o.a,secondary:{main:"#fff"},background:{default:"#fff"}}}),Ve=Object(J.a)((function(e){return Object(Ue.a)({app:{textAlign:"center"},main:{position:"absolute",top:"0px",right:"0px",left:"0px",bottom:"0px",background:"white",display:"flex",justifyContent:"center",alignItems:"center"}})}))((function(e){var t=e.classes;return Object(_.jsxs)(Te.a,{theme:Fe,children:[Object(_.jsx)(Me.a,{}),Object(_.jsxs)("div",{className:t.app,children:[Object(_.jsx)("div",{className:t.main,children:Object(_.jsx)(Pe,{})}),Object(_.jsx)(Ae.a,{smDown:!0,children:Object(_.jsx)(Re,{label:"version : ",forkme:!0,baseURL:"https://github.com/VittorioAccomazzi/DicomEditor"})})]})]})})),Be=n(95),Le=Object(Be.a)({reducer:{}}),ze=n(93);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(_.jsx)(ze.a,{store:Le,children:Object(_.jsx)(Ve,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},69:function(e){e.exports=JSON.parse('{"version":"developer","long":""}')}},[[133,1,2]]]);
//# sourceMappingURL=main.ee44b15c.chunk.js.map